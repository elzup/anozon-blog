{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/github-actions-timezone","result":{"data":{"site":{"siteMetadata":{"title":"あのぞんブログ","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"0f13a583-c7fd-593b-b948-719e4f1952d2","excerpt":"日時の文字列をテストに使っているとき GitHub Actions でつまずいたのでメモ。 javascript の Date は自動でローカルのタイムゾーンで文字列化されます。 環境変数 TZ を指定して実行する 他の解決策 その他 環境変数 TZ を指定して実行する 他の解決策 unix timestamp…","html":"<p>日時の文字列をテストに使っているとき GitHub Actions でつまずいたのでメモ。</p>\n<p>javascript の Date は自動でローカルのタイムゾーンで文字列化されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   - Snapshot\n<span class=\"token prefix unchanged\"> </span>   + Received\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>     Array [\n<span class=\"token prefix unchanged\"> </span>   -   2020-03-22T13:22:00.000Z,\n<span class=\"token prefix unchanged\"> </span>   -   2020-03-22T13:22:00.000Z,\n<span class=\"token prefix unchanged\"> </span>   +   2020-03-22T22:22:00.000Z,\n<span class=\"token prefix unchanged\"> </span>   +   2020-03-22T22:22:00.000Z,</span></code></pre></div>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0-tz-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B\">環境変数 TZ を指定して実行する</a></li>\n<li><a href=\"#%E4%BB%96%E3%81%AE%E8%A7%A3%E6%B1%BA%E7%AD%96\">他の解決策</a></li>\n<li><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\">その他</a></li>\n</ul>\n</div>\n<h2 id=\"環境変数-tz-を指定して実行する\">環境変数 TZ を指定して実行する</h2>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"TZ=Asia/Tokyo jest\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"他の解決策\">他の解決策</h2>\n<p>unix timestamp でテスト比較する。(テストコードが少しわかりにくくなる)</p>\n<h2 id=\"その他\">その他</h2>\n<p>最初 GitHub Actions 側で指定していたけど、yarn test 側で指定したほうが理想的。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">      - run: TZ=Asia/Tokyo yarn test</code></pre></div>","frontmatter":{"title":"テストで TimeZone を固定する","date":"2020-07-01","tags":["GitHub Actions","test"]}}},"pageContext":{"slug":"github-actions-timezone","previous":{"excerpt":"why demos cs “change surround” ds “delete surround” ys “you surround” virtual select → S 公式リポジトリ https://github.com/tpope/vim-surround why…","fields":{"slug":"surround-vim-tutorial"},"frontmatter":{"title":"surround.vim 入門【vim中級者向け】"}},"next":{"excerpt":"Firebase Functions が Node 8 サポートを終了しログの仕様が少し変わりました。\n で Object を渡すと 1 行ずつにログが分割されてしまうようになりました。 Console.log calls result in multiple log…","fields":{"slug":"firebase-functions-log"},"frontmatter":{"title":"Firebase Functions の console.log をまとめる"}}}},"staticQueryHashes":["1855083372","2529228376","3070792728"]}