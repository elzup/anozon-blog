{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/github-actions-timezone","result":{"data":{"site":{"siteMetadata":{"title":"あのぞんブログ","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"0f13a583-c7fd-593b-b948-719e4f1952d2","excerpt":"日時の文字列をテストに使っているとき GitHub Actions でつまずいたのでメモ。 javascript の Date は自動でローカルのタイムゾーンで文字列化されます。 環境変数 TZ を指定して実行する 他の解決策 unix timestamp…","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"日時の文字列をテストに使っているとき GitHub Actions でつまずいたのでメモ。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"javascript の Date は自動でローカルのタイムゾーンで文字列化されます。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"diff"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-diff"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-diff"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","unchanged"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"text","value":"   - Snapshot\n"},{"type":"element","tagName":"span","properties":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"text","value":"   + Received\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","unchanged"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"text","value":"     Array [\n"},{"type":"element","tagName":"span","properties":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"text","value":"   -   2020-03-22T13:22:00.000Z,\n"},{"type":"element","tagName":"span","properties":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"text","value":"   -   2020-03-22T13:22:00.000Z,\n"},{"type":"element","tagName":"span","properties":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"text","value":"   +   2020-03-22T22:22:00.000Z,\n"},{"type":"element","tagName":"span","properties":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"text","value":"   +   2020-03-22T22:22:00.000Z,"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"環境変数-tz-を指定して実行する"},"children":[{"type":"text","value":"環境変数 TZ を指定して実行する"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"json"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-json"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-json"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"test\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"TZ=Asia/Tokyo jest\""}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"他の解決策"},"children":[{"type":"text","value":"他の解決策"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"unix timestamp でテスト比較する。(テストコードが少しわかりにくくなる)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"その他"},"children":[{"type":"text","value":"その他"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"最初 GitHub Actions 側で指定していたけど、yarn test 側で指定したほうが理想的。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"      - run: TZ=Asia/Tokyo yarn test"}]}]}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"テストで TimeZone を固定する","date":"2020-07-01","topics":["GitHubActions","test"]}}},"pageContext":{"slug":"github-actions-timezone","previous":{"excerpt":"公式リポジトリ https://github.com/tpope/vim-surround why 周囲(クウォート, 括弧, タグ …)の操作が楽になる Vim plugin にデフォルトでついてることが多いのですぐ使える VSCodeVim(VSCode), IdeaVIM…","fields":{"slug":"surround-vim-tutorial"},"frontmatter":{"title":"surround.vim 入門【vim中級者向け】"}},"next":{"excerpt":"Firebase Functions が Node 8 サポートを終了しログの仕様が少し変わりました。\n で Object を渡すと 1 行ずつにログが分割されてしまうようになりました。 Console.log calls result in multiple log…","fields":{"slug":"firebase-functions-log"},"frontmatter":{"title":"Firebase Functions の console.log をまとめる"}}}},"staticQueryHashes":["2529228376","3857661231","733094525"]}