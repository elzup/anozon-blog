{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/fix-cdr-cleanup","result":{"data":{"site":{"siteMetadata":{"title":"あのぞんブログ","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"ae263ed8-6d3a-5d3b-bc3f-3edb41b74850","excerpt":"この記事では cdr から不要なディレクトリを削除する方法を紹介します。 cdr は zsh に入っているコマンドで、過去に開いたディレクトリへ移動できるコマンドです。 普段は  をラップした anyframe を使っています。\n過去のディレクトリに素早く移動できてはかどっています。 しかし cdr は rm や mv…","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"この記事では cdr から不要なディレクトリを削除する方法を紹介します。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"cdr は zsh に入っているコマンドで、過去に開いたディレクトリへ移動できるコマンドです。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"普段は "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"cdr"}]},{"type":"text","value":" をラップした "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/mollifier/anyframe"},"children":[{"type":"text","value":"anyframe"}]},{"type":"text","value":" を使っています。\n過去のディレクトリに素早く移動できてはかどっています。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"しかし cdr は rm や mv (rename) したディレクトリをキャッシュしていなくて残ってしまってるようです。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"そこでキャッシュから存在しないディレクトリを一掃してみます。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"手順-1-キャッシュファイルの場所を確認する"},"children":[{"type":"text","value":"手順 1. キャッシュファイルの場所を確認する"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"$ zstyle"}]},{"type":"text","value":" を実行して "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"recent-dirs-file"}]},{"type":"text","value":" があればそこです。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"デフォルトは "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"~/.chpwd-recent-dirs"}]},{"type":"text","value":" です。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://elzup-image-storage.s3.amazonaws.com/blog/chpwd-recent-dirs.png","alt":"chpwd-recent-dirs"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"なにやら見慣れぬ形式で入っていました。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"手順-2-削除するシェル"},"children":[{"type":"text","value":"手順 2. 削除するシェル"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"1 行ずつ「ディレクトリが存在するか？」を見ます。\nそして、無ければ消すシンプルなシェルを書きます。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gist: "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/elzup/4d36336470d18ae9e6216d5276f19cbd"},"children":[{"type":"text","value":"Clean no exists directories"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","shebang","important"]},"children":[{"type":"text","value":"#!/bin/sh"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"cat"}]},{"type":"text","value":" ~/.chpwd-recent-dirs "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\\"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sed"}]},{"type":"text","value":" -e "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'s/^..\\(.*\\)./"},{"type":"element","tagName":"span","properties":{"className":["token","entity"],"title":"\\1"},"children":[{"type":"text","value":"\\1"}]},{"type":"text","value":"/g'"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\\"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"while"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"read"}]},{"type":"text","value":" line\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"do"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":" -d "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$line"}]},{"type":"text","value":"\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"then"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"\\$'"},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$line"}]},{"type":"text","value":"'\""}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fi"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"done"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"chmod"}]},{"type":"text","value":" +x cdr-recent-dirs-clearn.sh\n$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"bash"}]},{"type":"text","value":" cdr-recent-dirs-clearn.sh "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" .chpwd-recent-dirs-clearn\n$ vimdiff ~/.chpwd-recent-dirs .chpwd-recent-dirs-clearn"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"vimdiff で確認すると存在しないディレクトリがちゃんとなくなっていそうです。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://elzup-image-storage.s3.amazonaws.com/blog/vimdiff-cdr-clean.png","alt":"vimdiff-cdr-clean.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"mv"}]},{"type":"text","value":" .chpwd-recent-dirs-clearn ~/.chpwd-recent-dirs"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"よければ replace します。そして cdr に引っかかっていた 存在しないパスも消えました！"}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"【zsh】なくなったディレクトリを anyframe-widget-cdr から消す","date":"2020-01-21","topics":["zsh","ShellScript","DevOps"]}}},"pageContext":{"slug":"fix-cdr-cleanup","previous":{"excerpt":"この記事では zstyle で現在の値を取得する について紹介します。 zstyle コマンドのマニュアル zsh: 22 Zsh Modules 方法 1. -g オプションを使う。 方法…","fields":{"slug":"zstyle-get-current-value"},"frontmatter":{"title":"zstyle で現在の値を取得する"}},"next":{"excerpt":"この記事では GatsbyJS のコードブロックに言語バッジをつける方法について紹介します。 前提として  を使っています。 やり方を考えてるとき www.gatsbyjs.org/docs のコードブロックにも言語表示があったのと、このサイト自体も GatsbyJS…","fields":{"slug":"gatsby-codeblock-lang-badge"},"frontmatter":{"title":"GatsbyJS のコードブロックに言語バッジをつける方法"}}}},"staticQueryHashes":["1855083372","2529228376","3857661231"]}