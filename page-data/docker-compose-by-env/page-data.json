{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/docker-compose-by-env","result":{"data":{"site":{"siteMetadata":{"title":"あのぞんブログ","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"6e538dfc-5287-5d20-bc6b-944130933f3a","excerpt":".env ファイルを使う サンプルコード: elzup-sandbox/docker-scratch docker-compose.yml services.shell.environment に環境変数をパスしたいとします。\n変数  を  ファイルに記述します。 Docker…","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"env-ファイルを使う"},"children":[{"type":"text","value":".env ファイルを使う"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"サンプルコード: "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/elzup-sandbox/docker-scratch"},"children":[{"type":"text","value":"elzup-sandbox/docker-scratch"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker-compose.yml\nshell/\n  Dockerfile"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"docker-composeyml"},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"services.shell.environment に環境変数をパスしたいとします。\n変数 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"TOP_TOKEN"}]},{"type":"text","value":" を "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".env"}]},{"type":"text","value":" ファイルに記述します。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ymltitle=docker-compose.yml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ymltitle=docker-compose.yml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ymltitle=docker-compose.yml"]},"children":[{"type":"text","value":"version: '3'\nservices:\n  shell:\n    build: ./shell\n    volumes:\n      - ./shell:/src\n    image: shell\n    environment:\n      TOKEN: '${TOP_TOKEN}'"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":".env"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-.env"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-.env"]},"children":[{"type":"text","value":"TOP_TOKEN='Hello I am env variable!'"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Docker の実行では環境変数をそのまま "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" してみます。"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"div","properties":{"className":["gatsby-code-title"]},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"span","properties":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n       \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"FROM debian:stretch-slim\n\nCMD echo $TOKEN"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"この状態で "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker-compose up"}]},{"type":"text","value":" すると設定した値が渡っているのがわかります。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"shell_1  | 'Hello I am env variable!'"}]}]}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"docker-compose.yml に環境変数を渡す","date":"2020-05-01","topics":["DockerCompose","Docker"]}}},"pageContext":{"slug":"docker-compose-by-env","previous":{"excerpt":"概要 GitHub Pages から別のホスティングへ移行したとき、\nドメインが変わる場合にすべき設定について。 運用していたページ  へのアクセスを 新しい URL へリダイレクトする必要があります。 gh-pages…","fields":{"slug":"gh-pages-redirect"},"frontmatter":{"title":"GitHub Pages から別のサイトに移行するときのリダイレクト設定"}},"next":{"excerpt":"リモートリポジトリ先を変更(やリネーム)した際に .git/config から変える癖がついてしまったので整理もかねて。 git コマンドで URL を変える メリット 無効な設定をしてしまうリスクが少ない 1 コマンドで済む .git/config から メリット remote…","fields":{"slug":"git-config-edit"},"frontmatter":{"title":".git/config からリモートリポジトリを変える"}}}},"staticQueryHashes":["1855083372","2529228376","3857661231"]}