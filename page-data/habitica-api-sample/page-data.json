{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/habitica-api-sample","result":{"data":{"site":{"siteMetadata":{"title":"ã‚ã®ãã‚“ãƒ–ãƒ­ã‚°","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"1582cfdb-abb3-526d-8201-ded6c36a7ab4","excerpt":"ã“ã®è¨˜äº‹ã§ã¯ Habitica API ã§æ—¥èª²ã®è¨˜éŒ²ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚ Habitica ã¯æ—¥èª²ç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ Habitica - Gamify Your Life token ã‚’å–å¾—ã™ã‚‹ node.js ã§ API ã‚’å©ã ä¸­èº«ã‚’ç¢ºèªã™ã‚‹ æ—¥èª²ã‚’é”æˆã—ãŸæ—¥ä»˜ä¸€è¦§ã‚’å‡ºåŠ›ã—ã¦ã¿ã‚‹ ãŠã‚ã‚Šã« tokenâ€¦","html":"<p>ã“ã®è¨˜äº‹ã§ã¯ Habitica API ã§æ—¥èª²ã®è¨˜éŒ²ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p>\n<p>Habitica ã¯æ—¥èª²ç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>\n<p><a href=\"https://habitica.com/\">Habitica - Gamify Your Life</a></p>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#token-%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\">token ã‚’å–å¾—ã™ã‚‹</a></li>\n<li><a href=\"#nodejs-%E3%81%A7-api-%E3%82%92%E5%8F%A9%E3%81%8F\">node.js ã§ API ã‚’å©ã</a></li>\n<li><a href=\"#%E4%B8%AD%E8%BA%AB%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">ä¸­èº«ã‚’ç¢ºèªã™ã‚‹</a></li>\n<li><a href=\"#%E6%97%A5%E8%AA%B2%E3%82%92%E9%81%94%E6%88%90%E3%81%97%E3%81%9F%E6%97%A5%E4%BB%98%E4%B8%80%E8%A6%A7%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\">æ—¥èª²ã‚’é”æˆã—ãŸæ—¥ä»˜ä¸€è¦§ã‚’å‡ºåŠ›ã—ã¦ã¿ã‚‹</a></li>\n<li><a href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\">ãŠã‚ã‚Šã«</a></li>\n</ul>\n</div>\n<h2 id=\"token-ã‚’å–å¾—ã™ã‚‹\">token ã‚’å–å¾—ã™ã‚‹</h2>\n<p><img src=\"https://elzup-image-storage.s3.amazonaws.com/blog/Habitica_-_Gamify_Your_Life.png\"></p>\n<h2 id=\"nodejs-ã§-api-ã‚’å©ã\">node.js ã§ API ã‚’å©ã</h2>\n<p><a href=\"https://github.com/axios/axios\">axios</a> ã§å©ã„ã¦ã¿ã¾ã™ã€‚\nã¨ã‚Šã‚ãˆãšãƒ¬ã‚¹ãƒãƒ³ã‚¹å…¨ä½“ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>\"main.js\"</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>default\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">HABITICA_USER_ID</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HABITICA_TOKEN</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env\n\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  baseURL<span class=\"token operator\">:</span> <span class=\"token string\">'https://habitica.com'</span><span class=\"token punctuation\">,</span>\n  headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    Accept<span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'x-api-user'</span><span class=\"token operator\">:</span> <span class=\"token constant\">HABITICA_USER_ID</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'x-api-key'</span><span class=\"token operator\">:</span> <span class=\"token constant\">HABITICA_TOKEN</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'x-client'</span><span class=\"token operator\">:</span> <span class=\"token constant\">HABITICA_USER_ID</span> <span class=\"token operator\">+</span> <span class=\"token string\">'-node'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">main</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/v3/tasks/user'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// all data</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"ä¸­èº«ã‚’ç¢ºèªã™ã‚‹\">ä¸­èº«ã‚’ç¢ºèªã™ã‚‹</h2>\n<p>å‡ºåŠ›ã•ã‚ŒãŸ json ã®æ§‹é€ ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚</p>\n<p><code class=\"language-text\">fx</code> ã¨ã„ã† JSON è§£æ cli ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã„ã¦ãŠã™ã™ã‚ã§ã™ã€‚jq ã® filter ã‚‚ä½¿ãˆã¾ã™ã€‚\n<a href=\"https://github.com/antonmedv/fx\">antonmedv/fx: Command-line tool and terminal JSON viewer ğŸ”¥</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node main.js | fx</code></pre></div>\n<p>å–ã‚Šå‡ºã—ãŸã„æ—¥èª² <code class=\"language-text\">/ç­‹ãƒˆãƒ¬</code> ã§æ¤œç´¢ã—ã¾ã™ã€‚</p>\n<p><img src=\"https://elzup-image-storage.s3.amazonaws.com/blog/fx.png\"></p>\n<p>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ç¢ºèªã™ã‚‹ã¨ â€œnameâ€ ã¨ â€œhistoryâ€ ãŒã‚ã‚Šã¾ã™ã­ã€‚</p>\n<h2 id=\"æ—¥èª²ã‚’é”æˆã—ãŸæ—¥ä»˜ä¸€è¦§ã‚’å‡ºåŠ›ã—ã¦ã¿ã‚‹\">æ—¥èª²ã‚’é”æˆã—ãŸæ—¥ä»˜ä¸€è¦§ã‚’å‡ºåŠ›ã—ã¦ã¿ã‚‹</h2>\n<p>â€˜YYYY-MM-DDâ€™ ã®å½¢å¼ã§å‡ºåŠ›ã—ã¦ã¿ã¾ã™ã€‚</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>\"main.js\"</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> format <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fecha'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> tasks <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data\n<span class=\"token keyword\">const</span> workout <span class=\"token operator\">=</span> tasks<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token regex\">/ç­‹ãƒˆãƒ¬/</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> times <span class=\"token operator\">=</span> workout<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">commit</span> <span class=\"token operator\">=></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span>commit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">,</span> <span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// å¾Œæ—¥ commit ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>times<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ node main.js\n\n<span class=\"token number\">2020</span>-02-19\n<span class=\"token number\">2020</span>-02-20\n<span class=\"token number\">2020</span>-02-21\n<span class=\"token number\">2020</span>-02-22 //\n<span class=\"token number\">2020</span>-02-22 // â†ç¿Œæ—¥ã®ãƒªãƒã‚¤ãƒ³ãƒ‰ã§ãƒã‚§ãƒƒã‚¯ã—ãŸå ´åˆã‹ã¶ã£ã¦ã—ã¾ã™\n<span class=\"token number\">2020</span>-02-23\n<span class=\"token number\">2020</span>-02-24\n<span class=\"token number\">2020</span>-02-25\n<span class=\"token number\">2020</span>-02-26\n<span class=\"token number\">2020</span>-02-29\n<span class=\"token number\">2020</span>-03-01</code></pre></div>\n<p>ã¨ã„ã†ã“ã¨ã§ã‹ã¶ã£ãŸå ´åˆã¯å‰æ—¥ã«ã™ã‚‹ãƒ‘ãƒƒãƒã‚’å½“ã¦ã¾ã™ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> times <span class=\"token operator\">=</span> workout<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">commit</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n  <span class=\"token function\">format</span><span class=\"token punctuation\">(</span>commit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">,</span> <span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  commit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ntimes<span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> prev <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n<span class=\"token keyword\">const</span> strs <span class=\"token operator\">=</span> times<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">,</span> t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ä¸€è‡´ã™ã‚‹å ´åˆã¯å‰æ—¥ã«</span>\n  <span class=\"token keyword\">const</span> ts <span class=\"token operator\">=</span> s <span class=\"token operator\">===</span> prev <span class=\"token operator\">?</span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">-</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> s\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=</span> ts<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nstrs<span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>strs<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2020-02-19\n2020-02-20\n2020-02-21\n2020-02-22\n2020-02-23\n2020-02-24\n2020-02-25\n2020-02-26\n2020-02-29\n2020-03-01</code></pre></div>\n<p>ã‹ã¶ã‚‰ãªããªã‚Šã¾ã—ãŸã€‚\nãŸã ã—ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã¯ç¢ºè¨¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">History ãªã—      // ã“ã¡ã‚‰ã®æ—¥ã«å®Ÿè¡Œã—ãŸå¯èƒ½æ€§ã‚ã‚Š\nHistory ã‚ã‚Š\nHistory ãªã—</code></pre></div>\n<p>ã‚³ãƒ¼ãƒ‰: <a href=\"https://github.com/elzup-sandbox/habitica-api-node-sample/blob/master/main.js\">https://github.com/elzup-sandbox/habitica-api-node-sample/blob/master/main.js</a></p>\n<h2 id=\"ãŠã‚ã‚Šã«\">ãŠã‚ã‚Šã«</h2>\n<p>Habitica ã® API ã‚’ä½¿ã†ã“ã¨ã§ã€ ã€Œãƒœã‚¿ãƒ³ 1 ã¤ã§ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’è¨˜éŒ²ã™ã‚‹ã€ ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã‚‚ä»Šå¾Œä½¿ãˆãã†ã ãªã¨æ€ã„ã¾ã—ãŸã€‚</p>","frontmatter":{"title":"javascript ã§ Habitica API ã‚’ä½¿ã£ã¦æ—¥èª²ã®è¨˜éŒ²ã‚’å–å¾—ã™ã‚‹","date":"2020-03-01","tags":["Habitica API","Node.js","json","fx"]}}},"pageContext":{"slug":"habitica-api-sample","previous":{"excerpt":"JavaScript ã§ ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è‡ªèº«ã‚’å‡ºåŠ›ã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚Qunieâ€¦","fields":{"slug":"javascript-own-print"},"frontmatter":{"title":"ã€JavaScriptã‚¯ãƒ¯ã‚¤ãƒ³ã€‘ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨åŒã˜æ–‡å­—åˆ—ã‚’å‡ºåŠ›ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ›¸ã„ãŸ"}},"next":{"excerpt":"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã« VSCode ã®è‰²ã‚’å¤‰ãˆã‚‹æ–¹æ³•ã‚’è¦‹ã¤ã‘ã¦æœ€è¿‘åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚\nã—ã‹ã—æ¯å›è¨­å®šã™ã‚‹ã®ã¯é¢å€’ãã•ã„ã®ã§ manifest.json ã‹ã‚‰ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã‚’èª­ã¿å‡ºã—ã¦\nè¨­å®šã™ã‚‹ cli ã‚’ä½œã‚Šã¾ã—ãŸã€‚ vscode-workcolor-setup  ã‚„  ã® themeâ€¦","fields":{"slug":"vscode-project-color"},"frontmatter":{"title":"manifest.json ã‹ã‚‰ VSCode ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«è‰²ã‚’ã¤ã‘ã‚‹"}}}},"staticQueryHashes":["1855083372","3070792728","4156694545"]}