{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/ngrok-http-capture","result":{"data":{"site":{"siteMetadata":{"title":"あのぞんブログ","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"1bc8a106-5d67-5531-b238-de3c5923f121","excerpt":"「自前の API にリクエストは届いてるけどなにか不具合が起きている」「リクエストをダンプする環境をすぐに用意するのはダルい」とき用。\nngrok の本来の使い方とは違いますが、http パケットキャプチャができます。 ngrok とは ngrok - secure introspectable tunnels to…","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"「自前の API にリクエストは届いてるけどなにか不具合が起きている」「リクエストをダンプする環境をすぐに用意するのはダルい」とき用。\nngrok の本来の使い方とは違いますが、http パケットキャプチャができます。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"ngrok-とは"},"children":[{"type":"text","value":"ngrok とは"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://ngrok.com/"},"children":[{"type":"text","value":"ngrok - secure introspectable tunnels to localhost"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"使い捨て URL (https) でローカルのネットワークを外部に公開できるサービスです。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"brew install ngrok"}]},{"type":"text","value":" でも入れられるようになりました。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"セットアップ手順 "},{"type":"element","tagName":"a","properties":{"href":"https://ngrok.com/docs"},"children":[{"type":"text","value":"ngrok – documentation"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"無料ユーザ登録と cli に key 登録が必要です。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"どんな事ができるか"},"children":[{"type":"text","value":"どんな事ができるか"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"コマンドで立ち上げます。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"$ ngrok http "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3000"}]},{"type":"text","value":"\nngrok by @inconshreveable                                        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"Ctrl+C to quit"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\nSession Status                online\nAccount                       elzup "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"Plan: Free"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nVersion                       "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2.3"}]},{"type":"text","value":".35\nRegion                        United States "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"us"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nWeb Interface                 http://127.0.0.1:4040\nForwarding                    http://9e95453ed1cb.ngrok.io -"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" http://localhost:3000\nForwarding                    https://9e95453ed1cb.ngrok.io -"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" http://localhost:3000\n\nConnections                   ttl     opn     rt1     rt5     p50     p90\n                              "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ここで web アプリを立ててくれます。 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"http://127.0.0.1:4040"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"例えば以下のようなリクエストを投げてみます。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"curl"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-curl"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-curl"]},"children":[{"type":"text","value":"curl -X PUT \"https://9e95453ed1cb.ngrok.io/path/hello?query=hello-query\" -H \"x-myheader: hello-header\" -d '{\"body\":\"hello\"}'"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"すると受け取った(ngrok が通した) HTTP の中身を見ることが出来ます。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://elzup-image-storage.s3.amazonaws.com/blog/ngrok-sample.png","alt":"ngrokサンプル"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"デフォルトでは ngrok が 502 レスポンスを返すようです。"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nもちろん ローカルで http server を立てておけば レスポンス側の内容も見れます。"}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"ngrok で http リクエストの中身を全部確認する【IoTデバッグ】","date":"2020-10-13","topics":["http","ngrok"]}}},"pageContext":{"slug":"ngrok-http-capture","previous":{"excerpt":"コード 1  を使う方法です。 コード 2 コード 1 でいいですが最初に思いついた正規表現で削る方法です。\n動作が早いかわからないですが (渡される n が行数より大きいときに使えません。)\n遅かったです。Repl.it - regex-vs-slice","fields":{"slug":"js-remove-head-line"},"frontmatter":{"title":"js で文字列の先頭のn 行を削除する"}},"next":{"excerpt":"メモリ付きの定規、ルーラーコンポーネントのサンプルです。 react-memory-component コード ruler-with-memory - CodeSandbox ミソ ブロック部分とメモリ部分を 0.…","fields":{"slug":"react-memory-ruler"},"frontmatter":{"title":"React と display grid でメモリ付き定規"}}}},"staticQueryHashes":["2529228376","3857661231","733094525"]}