{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/danger-of-noopener","result":{"data":{"site":{"siteMetadata":{"title":"あのぞんブログ","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"a7a8f4ff-75c3-5e3a-b757-950d1a464598","excerpt":"この記事では rel=noopener”をつけないとどんなことができるのかをデモで示します。 noopener の攻撃デモ 攻撃サイト側のコード noopener の攻撃デモ リンク: https://tools.anozon.me/noopener noopener…","html":"<p>この記事では rel=noopener”をつけないとどんなことができるのかをデモで示します。</p>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#noopener-%E3%81%AE%E6%94%BB%E6%92%83%E3%83%87%E3%83%A2\">noopener の攻撃デモ</a></li>\n<li><a href=\"#%E6%94%BB%E6%92%83%E3%82%B5%E3%82%A4%E3%83%88%E5%81%B4%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89\">攻撃サイト側のコード</a></li>\n</ul>\n</div>\n<h2 id=\"noopener-の攻撃デモ\" style=\"position:relative;\">noopener の攻撃デモ</h2>\n<p>リンク: <a href=\"https://tools.anozon.me/noopener\">https://tools.anozon.me/noopener</a></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/noopener-attacker<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">target</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>_blank<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  noopenerをつけていない危険なリンク\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/noopener-attacker<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">target</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>_blank<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>noopener<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  noopenerをつけているリンク\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>noopener をつけていない危険なリンクから開いてパスワードフォームにタイプしてみます。</p>\n<p><img src=\"https://elzup-image-storage.s3.amazonaws.com/blog/noopener-attack.gif\"></p>\n<p>入力内容が攻撃者に丸見えですね。</p>\n<h2 id=\"攻撃サイト側のコード\" style=\"position:relative;\">攻撃サイト側のコード</h2>\n<p><code class=\"language-text\">window.opener.document</code> でアクセスもとの document にアクセス出来てしまいます。怖いですね。</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\">window<span class=\"token punctuation\">.</span>opener<span class=\"token punctuation\">.</span>document\n  <span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token comment\">// console.log(e.target.value)</span>\n  <span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">window.opener</code> なんてめったにつかわないので デフォルトにしてくれたほうが楽そうですね。</p>","frontmatter":{"title":"rel=noopenerをつけないサイトへの攻撃デモ","date":"2020-04-29","tags":["Security","HTML"]}}},"pageContext":{"slug":"danger-of-noopener","previous":{"excerpt":"この記事では Excel やスプレッドシートでの方眼紙の作り方 について紹介します。 Google SpreadSheet で作る Excel の場合 Google SpreadSheet で作る cmd + A: 全選択。 A 列をダブルクリック(A 列解除+A…","fields":{"slug":"spreadsheet-graph-paper"},"frontmatter":{"title":"Excelやスプレッドシートで方眼紙を作る方法"}},"next":null}}}