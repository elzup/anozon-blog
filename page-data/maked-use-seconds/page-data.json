{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/maked-use-seconds","result":{"data":{"site":{"siteMetadata":{"title":"あのぞんブログ","author":"anozon","siteUrl":"https://blog.anozon.me"}},"markdownRemark":{"id":"b5ba9f3e-3be9-5f41-a265-45c9d084a31f","excerpt":"という react-hooks ライブラリ を作りました。 elzup/use-seconds: Seconds interval time for ReactHooks DEMO - CodeSandbox useSecounds の特徴 長時間使用しても .000 (コンマ…","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"useSecounds"}]},{"type":"text","value":" という react-hooks ライブラリ を作りました。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/elzup/use-seconds"},"children":[{"type":"text","value":"elzup/use-seconds: Seconds interval time for ReactHooks"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://codesandbox.io/s/use-seconds-example-w875w"},"children":[{"type":"text","value":"DEMO - CodeSandbox"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"usesecounds-の特徴"},"children":[{"type":"text","value":"useSecounds の特徴"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"長時間使用しても .000 (コンマ 0 ミリ秒) のタイミングで更新する"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"getSeconds() が 1 つ前の Date を渡さない"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"処理が早まって x.995 のタイミングで更新が発生しても (x + 1).000 のタイムスタンプを返します。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"setinterval-はずれていく"},"children":[{"type":"text","value":"setInterval はずれていく"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"「setInterval は 登録時の timestamp から 補正しながら実行されるのか？ 🤔」と思い調べてみたのですがずれていく(drift する)みたいです。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"参考: "},{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/985670/will-setinterval-drift"},"children":[{"type":"text","value":"javascript - Will setInterval drift? - Stack Overflow"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"検証してみても徐々にずれていきました。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://elzup-image-storage.s3.amazonaws.com/blog/set-interval-1h.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"hooks-ライブラリの実装で意識したこと"},"children":[{"type":"text","value":"hooks ライブラリの実装で意識したこと"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"返り値が配列にした"},"children":[{"type":"text","value":"返り値が配列にした"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"最初オブジェクトで実装していたのですが、"},{"type":"element","tagName":"a","properties":{"href":"https://dev.to/namick/writing-your-own-react-hooks-the-return-value-3lp6"},"children":[{"type":"text","value":"返り値についての記事"}]},{"type":"text","value":"を読んで配列にしました。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://dev.to/namick/writing-your-own-react-hooks-the-return-value-3lp6"},"children":[{"type":"text","value":"Writing Your Own ReactHooks, the Return Value - DEV Community 👩‍💻👨‍💻"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"命名できる利点が挙げられています。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"usestate-を分けた"},"children":[{"type":"text","value":"useState を分けた"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"カスタムフックの中で 管理していた state が 3 つあったのですが useState 3 つに分けました。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"公式ドキュメントに保守性が上がる理由を挙げられています。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://ja.reactjs.org/docs/hooks-faq.html#should-i-use-one-or-many-state-variables"},"children":[{"type":"text","value":"フックに関するよくある質問 – React"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"create-react-hook"},"children":[{"type":"text","value":"create-react-hook"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/hermanya/create-react-hook"},"children":[{"type":"text","value":"https://github.com/hermanya/create-react-hook"}]},{"type":"text","value":" が使いやすかった。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"TypeScript サポート"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"example ディレクトリがある"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"test のサンプルがある"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"などが良かったです。"}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"useSecounds という時計用 hooks を作った","date":"2020-03-08","topics":["ReactHooks","個人開発"]}}},"pageContext":{"slug":"maked-use-seconds","previous":{"excerpt":"git は  でデフォルトのコミットメッセージの設定できます。 例えばこのブログのリポジトリは、記事を書いたとき 📝  をコミットメッセージの先頭に入れています。  毎回入力するのは面倒なので  を使って省略してみます。 手順…","fields":{"slug":"git-commit-message-template"},"frontmatter":{"title":"gitリポジトリごとにデフォルトのコミットメッセージを設定する"}},"next":{"excerpt":"cleanUrls を使う ホスティング動作を構成する  |  Firebase  の hostings.cleanUrls を true にすることで実現できます。 拡張子なしの URL で にアクセスできます。\n →","fields":{"slug":"firebase-hosting-clean-url"},"frontmatter":{"title":"Firebase Hosting の URL で .html を省略する設定"}}}},"staticQueryHashes":["1855083372","2529228376","3857661231"]}